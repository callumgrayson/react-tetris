(window["webpackJsonpreact-tetris"]=window["webpackJsonpreact-tetris"]||[]).push([[0],{15:function(t,n,e){t.exports=e(26)},20:function(t,n,e){},26:function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),o=e(8),i=e.n(o),c=(e(20),e(1)),u=function(){return Array.from(Array(20),function(){return new Array(12).fill([0,"clear"])})},l=function(t,n,e){for(var r=e.x,a=e.y,o=0;o<t.tetromino.length;o++)for(var i=0;i<t.tetromino.length;i++)if(0!==t.tetromino[o][i]&&(!n[o+t.pos.y+a]||!n[o+t.pos.y+a][i+t.pos.x+r]||"clear"!==n[o+t.pos.y+a][i+t.pos.x+r][1]))return!0},d=e(2),f=e(3),s=e(9),p=e.n(s);function m(){var t=Object(d.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: flex-start;\n\tpadding: 5vh;\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\n\taside {\n\t\twidth: 100%;\n\t\tmax-width: 300px;\n\t\tmin-width: 200px;\n\t\tdisplay: block;\n\t\tpadding: 0 20px;\n\t}\n\n\t@"," {\n\t\tflex-direction: column-reverse;\n\t\talign-items: center;\n\t\tpadding: 5vw 2vw;\n\n\t\taside {\n\t\t\twidth: 100%;\n\t\t\tmax-width: 100%;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tpadding: 0 2px;\n\t\t\tmin-height: 132px;\n\n\t\t\t.display-area {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t}\n\t\t}\n\t}\n"]);return m=function(){return t},t}function h(){var t=Object(d.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground: url(",") #000;\n\tbackground-size: cover;\n\toverflow: hidden;\n"]);return h=function(){return t},t}var b=f.a.div(h(),p.a),v=f.a.div(m(),function(t){return t.mediaQuery});var y=e(12),g={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],[0,"S","S"],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},x=function(){var t="IJLOSTZ"[Math.floor(Math.random()*"IJLOSTZ".length)];return g[t]};function O(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}var w=function(){var t=Object(r.useState)({pos:{x:0,y:0},tetromino:g[0].shape,collided:!1}),n=Object(c.a)(t,2),e=n[0],a=n[1],o=function(t,n){var e=t.map(function(n,e){return t.map(function(t){return t[e]})});return n>0?e.map(function(t){return t.reverse()}):e.reverse()},i=Object(r.useCallback)(function(){a({pos:{x:4,y:0},tetromino:x().shape,collided:!1})},[]);return[e,function(t){var n=t.x,e=t.y,r=t.collided;a(function(t){return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?O(e,!0).forEach(function(n){Object(y.a)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):O(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}({},t,{pos:{x:t.pos.x+=n,y:t.pos.y+=e},collided:r})})},i,function(t,n){var r=JSON.parse(JSON.stringify(e));r.tetromino=o(r.tetromino,n);for(var i=r.pos.x,c=1;l(r,t,{x:0,y:0});)if(r.pos.x+=c,(c=-(c+(c>0?1:-1)))>r.tetromino[0].length)return o(r.tetromino,-n),void(r.pos.x=i);a(r)}]},j=function(t,n){var e=Object(r.useState)(u()),a=Object(c.a)(e,2),o=a[0],i=a[1],l=Object(r.useState)(0),d=Object(c.a)(l,2),f=d[0],s=d[1];return Object(r.useEffect)(function(){s(0);var e=function(e){var r=e.map(function(t){return t.map(function(t){return"clear"===t[1]?[0,"clear"]:t})});return t.tetromino.forEach(function(n,e){n.forEach(function(n,a){0!==n&&(r[e+t.pos.y][a+t.pos.x]=[n,"".concat(t.collided?"merged":"clear")])})}),t.collided?(n(),function(t){return t.reduce(function(n,e){return-1===e.findIndex(function(t){return 0===t[0]})?(s(function(t){return t+1}),n.unshift(new Array(t[0].length).fill([0,"clear"])),n):(n.push(e),n)},[])}(r)):r};i(function(t){return e(t)})},[t,n]),[o,i,f]};function E(){var t=Object(d.a)(["\n\tdisplay: grid;\n\tgrid-template-rows: repeat(\n\t\t",",\n\t\tcalc(80vh / ",")\n\t);\n\tgrid-template-columns: repeat(\n\t\t",",\n\t\tcalc(80vh / ",")\n\t);\n\tgrid-gap: 1px;\n\tborder: 2px solid #333;\n\tbackground: #111;\n\n\t@"," {\n\t\tgrid-template-rows: repeat(\n\t\t\t",",\n\t\t\tcalc(50vh / ",")\n\t\t);\n\t\tgrid-template-columns: repeat(\n\t\t\t",",\n\t\t\tcalc(50vh / ",")\n\t\t);\n\t\tmargin-top: 1vh;\n\t}\n"]);return E=function(){return t},t}var k=f.a.div(E(),function(t){return t.height},function(t){return t.height},function(t){return t.width},function(t){return t.height},function(t){return t.mediaQuery},function(t){return t.height},function(t){return t.height},function(t){return t.width},function(t){return t.height});function Q(){var t=Object(d.a)(["\n\twidth: auto;\n\tbackground: rgba(",", 0.8);\n\tborder: ",";\n\tborder-bottom-color: rgba(",", 0.1);\n\tborder-right-color: rgba(",", 1);\n\tborder-top-color: rgba(",", 1);\n\tborder-left-color: rgba(",", 0.3);\n"]);return Q=function(){return t},t}var S=f.a.div(Q(),function(t){return t.color},function(t){return 0===t.type?"0px solid":"3px solid"},function(t){return t.color},function(t){return t.color},function(t){return t.color},function(t){return t.color}),C=a.a.memo(function(t){var n=t.type;return a.a.createElement(S,{type:n,color:g[n].color})}),I=function(t){var n=t.stage,e=t.mediaQuery;return a.a.createElement(k,{width:n[0].length,height:n.length,mediaQuery:e},n.map(function(t){return t.map(function(t,n){return a.a.createElement(C,{key:n,type:t[0]})})}))};function J(){var t=Object(d.a)(["\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\talign-items: center;\n\tmargin: 0 0 2vh 0;\n\tpadding: 2vh;\n\tborder: 4px solid #333;\n\tmin-height: 3vh;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tcolor: ",";\n\tbackground: #000;\n\tfont-family: Pixel, Arial, Helvetica, sans-serif;\n\tfont-size: 1rem;\n\n\t@"," {\n\t\tflex-wrap: wrap;\n\t\twidth: 46%;\n\t\tmin-height: 15px;\n\t\tfont-size: 0.6rem;\n\t\tmargin: 1vh 2%;\n\t}\n"]);return J=function(){return t},t}var P=f.a.div(J(),function(t){return t.gameOver?"red":"#999"},function(t){return t.mediaQuery}),z=function(t){var n=t.text,e=t.mediaQuery;return a.a.createElement(P,{mediaQuery:e},n)};function N(){var t=Object(d.a)(["\n\tbox-sizing: border-box;\n\tmargin: 0 0 2vh 0;\n\tpadding: 20px;\n\tmin-height: 30px;\n\twidth: 100%;\n\tborder-radius: 20px;\n\tborder: none;\n\tcolor: white;\n\tbackground: #333;\n\tfont-family: Pixel, Arial, Helvetica, sans-serif;\n\tfont-size: 1rem;\n\toutline: none;\n\tcursor: pointer;\n\n\t&::selection {\n\t\tbackground: transparent;\n\t}\n\n\t@"," {\n\t\twidth: 46%;\n\t\tfont-size: .8rem;\n\t\tmin-height: 15px;\n\t\tfont-size: minmax(3vmin, 14px);\n\t\tmargin: 1vh 2%;\n\t}\n"]);return N=function(){return t},t}var L=f.a.div(N(),function(t){return t.mediaQuery}),A=function(t){var n=t.callback,e=t.mediaQuery;return a.a.createElement(L,{onClick:n,mediaQuery:e},"Start Game")};function T(){var t=Object(d.a)(["\n\tdisplay: none;\n\n\t@"," {\n        position: fixed;\n        bottom: 0;\n        left: 0\n\t\twidth: 100%;\n\t\theight: calc(100vh - 32vh - 50vh);\n        color: #999;\n        display: block;\n\n\t\t.row {\n\t\t\twidth: 100%;\n            height: 50%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 3rem;\n\n            div {\n                border-radius: 20px;\n                height: 80%;\n                border: 3px solid rgb(51, 51, 51);\n                background: black;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                cursor: pointer;\n                user-select: none;\n                -webkit-tap-highlight-color: transparent;\n            }\n\t\t}\n\n\t\t.drop {\n            margin: 0 auto;\n            \n            div {\n                width: 66%;\n                padding-bottom: 2%;\n            }\n\t\t}\n\n\t\t.translate {\n            display: flex;\n            justify-content: space-between;\n\n\t\t\tdiv {\n                width: 30%;\n\t\t\t}\n\t\t}\n\t}\n"]);return T=function(){return t},t}var Z=f.a.div(T(),function(t){return t.mediaQuery}),D=function(t){var n=t.clickHandler,e=t.mediaQuery;return a.a.createElement(Z,{mediaQuery:e},a.a.createElement("div",{className:"row drop"},a.a.createElement("div",{onClick:function(t){return n("drop")}},"\u2193")),a.a.createElement("div",{className:"row translate"},a.a.createElement("div",{onClick:function(t){return n("left")}},"\u2190"),a.a.createElement("div",{onClick:function(t){return n("rotate")}},"\u21bb"),a.a.createElement("div",{onClick:function(t){return n("right")}},"\u2192")))},H=function(){var t=Object(r.useState)(null),n=Object(c.a)(t,2),e=n[0],o=n[1],i=Object(r.useState)(!1),d=Object(c.a)(i,2),f=d[0],s=d[1],p=w(),m=Object(c.a)(p,4),h=m[0],y=m[1],g=m[2],x=m[3],O=j(h,g),E=Object(c.a)(O,3),k=E[0],Q=E[1],S=function(t){var n=Object(r.useState)(0),e=Object(c.a)(n,2),a=e[0],o=e[1],i=Object(r.useState)(0),u=Object(c.a)(i,2),l=u[0],d=u[1],f=Object(r.useState)(0),s=Object(c.a)(f,2),p=s[0],m=s[1],h=[40,100,300,1200],b=Object(r.useCallback)(function(){t>0&&(o(function(n){return n+h[t-1]*p}),d(function(n){return n+t}))},[p,h,t]);return Object(r.useEffect)(function(){b()},[b,t,a]),[a,o,l,d,p,m]}(E[2]),C=Object(c.a)(S,6),J=C[0],P=C[1],N=C[2],L=C[3],T=C[4],Z=C[5],H="media only screen and (not(pointer)) and (not(hover)), (max-width: 600px), (max-device-width: 1024px)",G=function(t){l(h,k,{x:t,y:0})||y({x:t,y:0})},K=function(){Q(u()),o(1e3),g(),s(!1),P(0),L(0),Z(1)},M=function(){N>10*(T+1)&&(Z(function(t){return t+1}),o(1e3/(T+1)+200)),l(h,k,{x:0,y:1})?(h.pos.y<1&&(s(!0),o(null)),y({x:0,y:0,collided:!0})):y({x:0,y:1,collided:!1})},R=function(t){var n=t.keyCode;f||40===n&&o(1e3/(T+1)+200)},B=function(t){var n=t.keyCode;f||(37===n?G(-1):39===n?G(1):40===n?(o(null),M()):38===n&&x(k,1))};return function(t,n){var e=Object(r.useRef)();Object(r.useEffect)(function(){e.current=t},[t]),Object(r.useEffect)(function(){if(null!==n){var t=setInterval(function(){e.current()},n);return function(){clearInterval(t)}}},[n])}(function(){M()},e),a.a.createElement(b,{role:"button",tabIndex:"0",onKeyDown:function(t){return B(t)},onKeyUp:R},a.a.createElement(v,{mediaQuery:H},a.a.createElement(I,{stage:k,mediaQuery:H}),a.a.createElement("aside",null,f?a.a.createElement("div",{className:"display-area"},a.a.createElement(z,{text:"Game Over - Score: ".concat(J),mediaQuery:H}),a.a.createElement(A,{className:"start-button",callback:K,mediaQuery:H})):a.a.createElement("div",{className:"display-area"},a.a.createElement(z,{text:"Score: ".concat(J),mediaQuery:H}),a.a.createElement(z,{text:"Rows: ".concat(N),mediaQuery:H}),a.a.createElement(z,{text:"Level: ".concat(T),mediaQuery:H}),a.a.createElement(A,{className:"start-button",callback:K,mediaQuery:H})))),a.a.createElement(D,{clickHandler:function(t){var n={drop:{keyCode:40},left:{keyCode:37},rotate:{keyCode:38},right:{keyCode:39}};B(n[t]),R(n[t])},mediaQuery:H}))},G=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(H,null))};i.a.render(a.a.createElement(G,null),document.getElementById("root"))},9:function(t,n,e){t.exports=e.p+"static/media/bg.2810fe6b.png"}},[[15,1,2]]]);
//# sourceMappingURL=main.fb9f3ba7.chunk.js.map